# ChurchBellsSystem  
A lightweight, applianceâ€‘grade Raspberry Pi bell scheduler with a simple web interface, persistent volume control, and a modular architecture designed for future expansion.

This project provides a reliable, easyâ€‘toâ€‘use system for scheduling and playing bell chimes on a Raspberry Pi. It includes a default homepage on port 80 and a full bell scheduler UI on port 8080.

---

## Features

### ğŸ”” Bell Scheduler (Port 8080)
- Login system (default: **admin / changeme**)
- Add, edit, enable/disable, and delete alarms
- Alarms sorted by day of week and time
- Plays WAV files using `pw-play`
- Persistent system volume slider pinned to the bottom-left of the UI
- Builtâ€‘in default chime sound generated during installation
- Automatic scheduler loop that fires alarms at the correct time

### ğŸ  Home Page (Port 80)
- Simple â€œWork in Progressâ€ landing page
- Links to the Bell Scheduler
- Runs independently from the scheduler service

### ğŸ› ï¸ System Architecture
- Runs under a dedicated service user for predictable audio/device permissions
- Two systemd services:
  - `churchbell-home.service` (port 80)
  - `churchbell.service` (port 8080)
- Designed for future modular services (announcements, livestream, admin tools, etc.)

---

## Requirements

- Raspberry Pi (any model with audio output)
- Raspberry Pi OS or Debian-based Linux
- Python 3.9+
- Audio output configured (HDMI or 3.5mm)
- Internet connection for first install

---

## Important Notes

âš ï¸ **Audio Playback**: This system uses `pw-play` (PipeWire) for audio playback. The `aplay` command (ALSA) is **not supported** in future builds for Pi3 software and should not be used.

---

## Installation

Clone the repository:

```bash
git clone https://github.com/kd5jp/ChurchBell.git
cd ChurchBell
```
Then run:

```bash
./install.sh
```

Optional: customize the service user, install dir, and initial admin login:

```bash
CHURCHBELL_SERVICE_USER=NewHope \
CHURCHBELL_APP_DIR=/opt/church-bells \
CHURCHBELL_ADMIN_USER=admin \
CHURCHBELL_ADMIN_PASS=changeme \
./install.sh
```
The installer will:
- Install dependencies
- Create or update the service user (adds audio/device groups)
- Create a Python virtual environment
- Generate a default chime sound
- Initialize the database
- Install and start systemd services

Accessing the System
Home Page (Port 80)

```bash
http://<pi-ip>/
```
Bell Scheduler (Port 8080)
```bash
http://<pi-ip>:8080
```
Default Login
```bash
Username: admin
Password: changeme
```
You can change the password from within the web interface.

Updating
To update the application code or dependencies:
```bash
./update.sh
```
This will refresh the virtual environment and ensure all dependencies are current.

Uninstalling
To remove the services, virtual environment, and database:
```bash
./uninstall.sh
```
This will:
- Stop and disable systemd services
- Remove service files
- Delete the virtual environment
- Delete the SQLite database
Your source code and sound files remain intact.
```bash
Directory Structure
ChurchBellsSystem/
â”œâ”€ app.py                 # Bell scheduler web app (port 8080)
â”œâ”€ home.py                # Default homepage (port 80)
â”œâ”€ bells.db               # Auto-created SQLite database
â”œâ”€ sounds/
â”‚  â””â”€ chime.wav           # Default chime generated by install.sh
â”œâ”€ templates/
â”‚  â”œâ”€ base.html
â”‚  â”œâ”€ login.html
â”‚  â””â”€ alarms.html
â”œâ”€ static/
â”‚  â””â”€ main.css
â”œâ”€ install.sh
â”œâ”€ update.sh
â””â”€ uninstall.sh
```
Future Expansion
This system is intentionally modular. Planned or possible future services include:
- Textâ€‘toâ€‘speech announcements
- Livestream monitoring
- Admin tools
- Multiâ€‘zone bell control
- Remote management
Each service can run on its own port with its own systemd unit.

Author
Created by Jesse (KD5JP)
Designed for reliability, simplicity, and longâ€‘term maintainability.

